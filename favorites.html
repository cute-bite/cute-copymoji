<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Favorites - Cute CopyMoji | Save Your Favorite Emojis & Text Arts</title>
<meta name="description" content="Save and manage your favorite emojis, kaomoji, fonts, and dot art in one place with Cute CopyMoji. Quick access to everything you love.">


  <!-- 공통 스타일 -->
  <link rel="stylesheet" href="./index.css" />

  <style>
    /* ===== 필터 바 ===== */
    .filters {
      display:flex; flex-wrap:wrap; align-items:center; justify-content:center;
      gap:8px; margin-top:12px;
    }
    .filters .chip { margin:0; }

    /* ===== 그리드 ===== */
    #fav-grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap:12px;
      justify-content:center;
      align-items:start;
      margin-top:16px;
    }

    .fav-card{
      position:relative;
      display:flex; flex-direction:column;
      min-height:130px;
      padding:12px 12px 14px;
      border:1px solid var(--border);
      border-radius:12px;
      background:var(--card);
      transition:background .2s ease, box-shadow .2s ease, border-color .2s ease;
      cursor:pointer; overflow:hidden;
    }
    .fav-card:hover { background:var(--chip); border-color:var(--border); box-shadow:var(--shadow); }

    .fav-meta{
      position:absolute; top:8px; right:8px;
      display:flex; gap:6px; align-items:center;
    }
    .fav-badge{
      padding:2px 8px; font-size:11px; border-radius:999px;
      border:1px solid var(--border); background:var(--card); color:var(--text);
    }
    .fav-btn{
      padding:2px 6px; font-size:12px; border:1px solid var(--border);
      border-radius:8px; background:var(--card); cursor:pointer;
    }
    .fav-btn.is-active{ background:var(--chip); box-shadow:var(--shadow); }

    .fav-text{
      flex:1; display:flex; align-items:center; justify-content:center;
      text-align:center; overflow-wrap:anywhere; word-break:break-word; text-wrap:pretty;
      white-space:normal; line-height:1.35;
      font-size:18px; margin-top:8px; color:var(--text);
    }
    .fav-card[data-size="sm"] .fav-text{ font-size:16px; }
    .fav-card[data-size="xs"] .fav-text{ font-size:14px; }

    /* 빈 상태 */
    #empty{ display:none; text-align:center; margin:20px 0; color:var(--muted); }

    /* 검색창 (옵션) */
    .toolbar{ display:flex; justify-content:center; margin:14px 0 0; }
    .search{ position:relative; width:min(860px,90%); }
    .search input{
      width:100%; padding:12px 44px 12px 40px; border-radius:14px;
      border:1px solid var(--border); background:var(--card); color:var(--text);
      box-shadow:var(--shadow); outline:none;
    }
    .search .icon{ position:absolute; left:12px; top:50%; transform:translateY(-50%); opacity:.7 }

    /* 토스트 */
    #toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:24px;
      background:var(--card); border:1px solid var(--border); color:var(--text);
      padding:8px 12px; border-radius:10px; box-shadow:var(--shadow); opacity:0; transition:opacity .2s; z-index:50; }
    #toast.show{ opacity:1; }


/* Dot Art 전용 렌더링 (줄맞춤/공백 보존) */
.fav-card.is-dot .fav-text{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  white-space: pre;        /* 공백/개행 그대로, 줄바꿈 안 함 */
  overflow: auto;          /* 가로가 길면 스크롤 */
  line-height: 1.1;        /* 줄 간격 촘촘히 */
  letter-spacing: 0;       /* 글자 간격 보정 */
  -webkit-font-smoothing: antialiased;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0;
}



  </style>


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4324510515730355" crossorigin="anonymous"></script>



</head>
<body class="theme-pink">
  <div id="app-header"></div>


  <main class="container" style="min-height:60vh">

    
  <!-- ✅ 인페이지 광고 (본문 안, 맨 위) -->
  <div id="ad-inpage" class="ad-slot">
    <!-- AdSense 반응형 디스플레이 유닛 코드 -->
  </div>

  
    <section id="view-favorites">

      <!---<div class="toolbar">
          <div class="search">
          <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="10.5" cy="10.5" r="6.5" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <input id="q" type="search" placeholder="Search favorites…" aria-label="Search favorites"/>
        </div>-->
      </div>

      <div class="content">
        <div class="filters" role="tablist" aria-label="Favorite filters">
          <button class="chip is-active" data-filter="all">All</button>
          <button class="chip" data-filter="emoticon">Emoticon</button>
          <button class="chip" data-filter="line">Line</button>
          <button class="chip" data-filter="emoji">Emoji</button>
          <button class="chip" data-filter="dot">Dot Art</button>
        </div>

        <p class="fav-notice" data-i18n="favNotice"
   style="font-size:12px;color:var(--muted);text-align:center;margin:8px 0;">
  즐겨찾기한 이모티콘은 브라우저의 로컬 스토리지에만 저장됩니다.<br>
  쿠키/로컬 스토리지를 삭제하거나 브라우저·기기를 바꾸면 데이터가 초기화됩니다.
</p>


        <section id="fav-grid" class="grid" aria-live="polite"></section>
        <div id="empty">No favorites yet.</div>
      </div>
    </section>
  </main>

  <div id="toast" role="status" aria-live="polite">Copied!</div>
  <div id="app-footer"></div>

  <!-- 헤더/푸터 로더 -->
  <script src="./include-layout.js" defer></script>

  <script>
  (function(){
    /* =============================
       LocalStorage 키 (후방호환 포함)
       ============================= */
    const KEYS = {
      emoticon: ['emo.favs.v1','emoticon.favs.v1','emoticon.favs','emo.favs'],
      line:     ['line.favs.v1','line.favs'],
      emoji:    ['emoji.favs.v1','emoji.favs'],
      dot:      ['dotart.favs.v1','dot.favs.v1','dotart.favs','dot.favs']
    };
    const PRIMARY_KEY = {
      emoticon: 'emo.favs.v1',
      line:     'line.favs.v1',
      emoji:    'emoji.favs.v1',
      dot:      'dotart.favs.v1'
    };

    function readList(key){
      try{
        const raw = localStorage.getItem(key);
        if(!raw) return [];
        const v = JSON.parse(raw);
        if(Array.isArray(v)) return v.map(x => (typeof x === 'string' ? x : (x && x.t) || '')).filter(Boolean);
        return [];
      }catch{ return []; }
    }
    function writeList(key, arr){
      try{ localStorage.setItem(key, JSON.stringify(arr||[])); }catch{}
    }

    // 카테고리별 즐겨찾기 병합(중복 제거)
    function loadCategory(cat){
      const keys = KEYS[cat] || [];
      const set = new Set();
      keys.forEach(k => readList(k).forEach(t => set.add(t)));
      return [...set];
    }

    // 카테고리별 항목 제거(해당 카테고리 후보 키 전부에서 제거)
    function removeFromCategory(cat, text){
      const keys = KEYS[cat] || [];
      keys.forEach(k => {
        const arr = readList(k);
        const idx = arr.indexOf(text);
        if(idx >= 0){ arr.splice(idx,1); writeList(k, arr); }
      });
    }

    // 전 카테고리 모으기
    function gatherAll(){
      const out = [];
      [['emoticon','Emoticon'], ['line','Line'], ['emoji','Emoji'], ['dot','Dot Art']]
        .forEach(([cat, label]) => {
          loadCategory(cat).forEach(t => out.push({ t, cat, label }));
        });
      return out;
    }

    /* =============================
       화면 요소/상태
       ============================= */
    const $grid  = document.getElementById('fav-grid');
    const $empty = document.getElementById('empty');
    const $q     = document.getElementById('q');
    let FILTER = 'all';

    function sizeFlagFor(text){
      const len = (text||'').length;
      if (len > 80) return 'xs';
      if (len > 48) return 'sm';
      return '';
    }
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }
    async function copyText(s){
      try{ await navigator.clipboard.writeText(s); }
      catch{
        const ta=document.createElement('textarea'); ta.value=s;
        document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
      }
    }
    function toast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg; t.classList.add('show'); clearTimeout(toast._t);
      toast._t = setTimeout(()=>t.classList.remove('show'), 900);
    }

    function matchesFilter(item){
      if (FILTER==='all') return true;
      return item.cat === FILTER;
    }
    function matchesQuery(item, q){
      if(!q) return true;
      q = q.toLowerCase();
      return (item.t||'').toLowerCase().includes(q) || (item.label||'').toLowerCase().includes(q);
    }

    function render(){
      const query = ($q?.value||'').trim();
      const items = gatherAll().filter(it => matchesFilter(it) && matchesQuery(it, query));

      $grid.innerHTML = '';
      if (!items.length){ $empty.style.display='block'; return; }
      $empty.style.display='none';

      for (const it of items){
        const sizeFlag = sizeFlagFor(it.t);
        const card = document.createElement('div');
        card.className='fav-card';
        if (sizeFlag) card.dataset.size = sizeFlag;
        if (it.cat === 'dot') card.classList.add('is-dot');

        card.innerHTML = `
          <div class="fav-text">${escapeHtml(it.t)}</div>
          <div class="fav-meta">
            <span class="fav-badge">${it.label}</span>
            <button class="fav-btn is-active" type="button" aria-label="unfavorite" title="unfavorite">★</button>
          </div>
        `;

        // 텍스트 클릭 → 복사
        card.querySelector('.fav-text').addEventListener('click', async (e)=>{
          e.stopPropagation();
          await copyText(it.t); toast('Copied!');
        });

        // 즐겨찾기 해제
        const favBtn = card.querySelector('.fav-btn');
        favBtn.addEventListener('click', (e)=>{
          e.stopPropagation();
          removeFromCategory(it.cat, it.t);
          render();
          toast('Removed from favorites');
        });

        $grid.appendChild(card);
      }
    }

    // 필터/검색 바인딩
    document.querySelector('.filters')?.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-filter]'); if(!btn) return;
      document.querySelectorAll('.filters .chip').forEach(b=>b.classList.remove('is-active'));
      btn.classList.add('is-active');
      FILTER = (btn.dataset.filter||'all').toLowerCase();
      render();
    });
    $q?.addEventListener('input', render);

    // 초기 렌더
    document.addEventListener('DOMContentLoaded', render);
  })();
  </script>

  <style id="fav-override">
  /* 최종 우선순위: 페이지 영역 한정 + !important */
  #view-favorites .fav-card .fav-text{
    font-size:10px !important;
    line-height:1.2 !important;
  }

  /* Dot Art 줄맞춤(이미 했다면 건너뛰기 가능) */
  #view-favorites .fav-card.is-dot .fav-text{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace !important;
    white-space: pre !important;
    letter-spacing: 0 !important;
    -webkit-font-smoothing: antialiased;
    font-variant-ligatures: none;
    font-feature-settings: "liga" 0;
  }
</style>

</body>
</html>
